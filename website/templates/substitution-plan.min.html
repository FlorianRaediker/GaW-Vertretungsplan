{% extends "_base.min.html" %} {%- block content -%} <div class="box status-box">Stand: {{ status }} </div> {%- for day in days -%} {%- set day_loop = loop -%} <div class=box><div class="container p-0 mb-3"><div class=row><div class=col-auto><div class=day-heading><span class="day-name pr-1">{{- day.day_name -}}</span><span class=text-muted>{{- day.date -}}</span></div>Woche {{- day.week -}} {%- if day.news -%} <div><span class=day-info>Nachrichten:</span> {%- for news_line in day.news[:-1] -%} {{ news_line|safe }}<br> {%- endfor -%} {{ day.news[-1] }} </div> {%- endif -%} </div><div class=col-auto> {%- for title, text in day.info -%} <span class=day-info>{{ title }}:</span> {{ text }} {%- endfor -%} </div></div></div> {%- set found_substitutions = true -%} {%- set subs_table -%} {%- for group in day.iter_groups(selection) -%} <tr class="first-of-group{%- if day_loop.index == 1 and group.substitutions[0].lesson_num is not none %} lesson{{ group.substitutions[0].lesson_num }}{%- endif -%}"><td class=group-name rowspan="{{ group.substitutions|length }}"> {%- if not selection and group.affected_groups and group.affected_groups|length == 1 -%} <a class="icon i-bookmark" href="?s={{ group.affected_groups[0] }}"></a> {%- endif -%} {{ group.get_html_name()|safe }} </td> {%- for data in group.substitutions[0] -%} <td>{{ data }}</td> {%- endfor -%} </tr> {%- for substitution in group.substitutions[1:] -%} <tr class="lesson{{ substitution.lesson_num }}" {%- if day_loop.index == 1 and substitution.lesson_num is not none -%} {%- endif -%}> {%- for data in substitution -%} <td>{{ data }}</td> {%- endfor -%} </tr> {%- endfor -%} {%- endfor -%} {%- endset -%} {%- if subs_table -%} <div class=table-responsive><table class="table table-sm table-striped substitutions-table"> {%- block table_head -%}{%- endblock -%} {{ subs_table|safe }} </table></div> {%- else -%} <p>Es gibt keine Vertretungen.</p> {%- endif -%} </div> {%- else -%} <div class=box>Es gibt keine Vertretungen.</div> {%- endfor -%} {%- if selection -%} <div class=box>Es werden Vertretungen f√ºr <i>{{ selection_str }}</i> angezeigt. {% block show_all_substitutions -%}{%- endblock -%} </div> {%- endif -%} {%- endblock -%} {%- block body_end -%} <script src="{{ base_path }}/assets/js/substitutions.min.js"></script> {%- endblock -%}