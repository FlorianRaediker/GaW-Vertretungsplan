{% extends "_base.min.html" %} {%- block content -%} <div class="box status-box"><span>Stand: {{ storage.status }}</span><span class=float-right id=online-status></span></div> {%- for day in storage.values() -%} {%- set day_loop = loop -%} <div class=box><div class="p-0 mb-3"><div class=row><div class=col-auto><div class=day-heading><span class="day-name pr-1">{{- day.day_name -}}</span><span class="text-muted date">{{- day.date -}}</span></div>Woche {{ day.week -}} {%- if day.news -%} <div><span class=day-info>Nachrichten:</span> {%- for news_line in day.news[:-1] -%} {{ news_line|safe }}<br> {%- endfor -%} {{ day.news[-1]|safe }} </div> {%- endif -%} </div><div class=col-md> {%- for title, text in day.info -%} <span class=day-info>{{ title }}:</span> {{ text }} {%- endfor -%} </div></div></div> {%- set found_substitutions = true -%} {%- set subs_table -%} {%- for group in day.iter_groups(selection) -%} {%- set s = group.substitutions[0] -%} <tr class="first-of-group{% if day_loop.index == 1 and s.lesson_num is not none %} lesson{{ s.lesson_num }}{% endif %}{% if s.is_new %} new-subs{% endif %}"> {%- set has_affected_groups = not selection and group.affected_groups_pretty is not none and group.affected_groups_pretty|length == 1 -%} <td class="group-name{% if has_affected_groups %} selectable{% endif %}" rowspan="{{ group.substitutions|length }}"> {%- if has_affected_groups -%} <a class="i-bookmark stretched-link" href="?s={{ group.affected_groups_pretty.__iter__().__next__() }}"></a> {%- endif -%} {{- group.name.to_html()|safe -}} </td> {%- for data in group.substitutions[0] -%} <td>{{ data }}</td> {%- endfor -%} </tr> {%- for s in group.substitutions[1:] -%} {% set classes -%} {%- if day_loop.index == 1 and s.lesson_num is not none -%}lesson{{ s.lesson_num }}{% endif %}{% if s.is_new %} new-subs{%- endif -%} {%- endset %} <tr class="{{ classes }}" {%- if classes %} {% endif %}> {%- for data in s -%} <td>{{ data }}</td> {%- endfor -%} </tr> {%- endfor -%} {%- endfor -%} {%- endset -%} {%- if subs_table -%} <div class=table-responsive><table class="table table-sm substitutions-table{% if selection %} has-selection{% endif %}"> {%- block table_head -%}{%- endblock -%} {{ subs_table|safe }} </table></div> {%- else -%} <p>Es gibt keine Vertretungen.</p> {%- endif -%} </div> {%- else -%} <div class=box>Es gibt keine Vertretungen.</div> {%- endfor -%} {%- if selection -%} <div class=box>Es werden Vertretungen f√ºr <i>{{ selection_str }}</i> angezeigt.  {% block show_all_substitutions -%}{%- endblock -%} </div> {% else %} <div class=box><form class=form type=get><label for=selectionInput>{% block select_text %}{% endblock %}</label><div class=form-row><div class="col-7 col-sm-6 col-md-4 col-xl-3"><input aria-describedby=selectionHelp class=form-control id=selectionInput name=s required> <small class="form-text text-muted" id=selectionHelp> {% block selection_help_text %}{% endblock %}</small></div><div class="col-2 col-sm-1 col-md-1"><button class="btn btn-primary mb-2" type=submit>OK</button></div></div></form></div> {%- endif -%} {%- endblock -%} {%- block body_end -%} <div class="fixed-bottom mb-2 mr-2"><div class=float-right><button class="btn btn-primary"><img alt="Get Notifications" src="{{ base_path }}/assets/img/bootstrap/bell-fill.svg"></button></div></div><script src="{{ base_path }}/assets/js/substitutions.min.js"></script> {%- endblock -%}