(function(){'use strict';const q=document.getElementById("selectionInput").value,r=window.location.pathname.split("/",2)[1];let t;try{(t=JSON.parse(window.localStorage.getItem(r+"-timetables")))||(t={})}catch(m){t={}}const u=document.getElementById("timetables-block");
if(q){var w=function(n,g=null,p=!0){g||(g=n.value);var e=n.dataset.selection;if(e in m){e=m[e];let f=n.dataset.weekdayName;if(f in e&&(g=g.toUpperCase(),e=e[f][n.dataset.lesson-1],g in e))for(let c of e[g])p?c.classList.add("is-relevant"):c.classList.remove("is-relevant")}};const m={};for(let n of document.getElementsByClassName("substitutions-box")){const g=n.querySelector(".substitutions-table tbody");if(g){var x=function(){var c=[];var h=e.match(/^(\d+)([A-Za-z]*)$/);if(null!=h){var a=h[1];h=h[2].toUpperCase()}else a=
"",h=e.toUpperCase();if(""!==a)if(""!==h)for(let d of h)c.push(a+d);else c.push(a);else c.push(h);a=[];for(let d of q.split(", ")){d=d.toUpperCase();for(let b of c)if(b.includes(d)){a.push(d);break}}console.log(e,c,a);for(let d of a)if(d in m||(m[d]={}),p in m[d])for(c=0;10>c;c++)m[d][p][c]=Object.assign(m[d][p][c],f[c]);else m[d][p]=f};const p=n.querySelector(".day-name").textContent;let e=null,f=[{},{},{},{},{},{},{},{},{},{}];for(let c of g.children){let h=c.querySelector(".group-name"),a,d;null!=
h?(null!=e&&x(),f=[{},{},{},{},{},{},{},{},{},{}],e=h.textContent,a=c.children[1].textContent.toUpperCase(),d=c.children[3].textContent):(a=c.children[0].textContent.toUpperCase(),d=c.children[2].textContent);for(let b of d.match(/(\d+)/g))b=parseInt(b),a in f[b-1]?f[b-1][a].push(c):f[b-1][a]=[c]}null!=e&&x()}}console.log(m);const A=document.getElementById("timetables-block-template"),B=document.getElementById("timetable-template");u.appendChild(A.content);const C=document.getElementById("timetables-container");
for(let n of q.split(", ")){let g=n.toUpperCase();g in t||(t[g]=[[null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null]]);const p=B.content.firstElementChild.cloneNode(!0);C.appendChild(p);p.querySelector(".timetable-selection").innerText=n;const e=p.querySelector("tbody");for(let f=1;11>f;f++){var y=
function(a,d){let b=parseInt(a.dataset.weekday),k=parseInt(a.dataset.lesson);b+=d;return 0<=b&&4>=b?(document.getElementById("timetable-"+a.dataset.selection+"-"+b+"-"+k).focus(),!0):!1},z=function(a,d){let b=parseInt(a.dataset.weekday),k=parseInt(a.dataset.lesson);k+=d;if(1>k){b--;if(0>b)return!1;k=10}else if(10<k){b++;if(5<=b)return a.blur(),!1;k=1}document.getElementById("timetable-"+a.dataset.selection+"-"+b+"-"+k).focus();return!0};const c=document.createElement("tr");e.appendChild(c);const h=
document.createElement("th");c.appendChild(h);h.innerText=f+".";for(let a=0;5>a;a++){const d=document.createElement("td");c.appendChild(d);const b=document.createElement("input");d.appendChild(b);b.classList.add("form-control","form-control-sm");b.id="timetable-"+g+"-"+a+"-"+f;const k=["Montag","Dienstag","Mittwoch","Donnerstag","Freitag"][a];b.setAttribute("type","text");b.setAttribute("autocapitalize","characters");b.setAttribute("autocomplete","off");b.setAttribute("autocorrect","off");b.setAttribute("spellcheck",
"false");b.setAttribute("enterkeyhint",4===a&&10===f?"done":"next");b.setAttribute("maxlength","3");b.setAttribute("aria-label",`${f}. Stunde ${k}`);b.addEventListener("focus",l=>l.target.select());b.addEventListener("input",l=>{w(l.target,l.target.dataset.oldvalue,!1);w(l.target);l.target.dataset.oldvalue=l.target.value;t[l.target.dataset.selection][parseInt(l.target.dataset.weekday)][parseInt(l.target.dataset.lesson)-1]=l.target.value.toUpperCase();window.localStorage.setItem(r+"-timetables",JSON.stringify(t))});
b.dataset.selection=g;b.dataset.weekday=a;b.dataset.weekdayName=k;b.dataset.lesson=f;let v=t[g][a][f-1];null!=v?(b.value=v,b.dataset.oldvalue=v,w(b)):b.dataset.oldvalue=""}e.addEventListener("keydown",a=>{switch(a.key){case "Tab":case "Enter":z(a.target,a.shiftKey?-1:1)&&a.preventDefault();break;case "ArrowDown":z(a.target,1)&&a.preventDefault();break;case "ArrowUp":z(a.target,-1)&&a.preventDefault();break;case "ArrowLeft":0!==a.target.selectionStart||1!==a.target.selectionEnd&&0!==a.target.selectionEnd||
y(a.target,-1)&&a.preventDefault();break;case "ArrowRight":a.target.selectionStart===a.target.selectionEnd&&y(a.target,1)&&a.preventDefault()}});e.addEventListener("input",a=>{a.target.value.length>=a.target.maxLength&&z(a.target,1)})}}};}).call(this);

//# sourceMappingURL=timetables.min.js.map
