@import "node_modules/bootstrap/scss/variables";

@import "variables";
@import "utilities/icons";

// ========================
// DAY INFO

.day-heading {
    overflow-wrap: break-word;
    line-height: 1;

    .day-name {
        font-size: $h1-font-size;
        font-weight: 600;
    }

    .text-muted {
        overflow-wrap: initial;
        font-size: x-large;
    }
}

.day-info {
    margin-top: $spacer * .65;
}

$day-info-heading-font-size: 1.15rem;

.day-info-checkbox {
    float: left;
    display: none;

    & ~ .day-info-label::before {
        @include icon(
                        url('data:image/svg+xml,<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chevron-right" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/></svg>'),
                $width: 1.2em,
                $height: 1.2em
        );
        vertical-align: text-bottom;
        background-color: var(--body-color);
    }

    &:not(:checked) {
        &~ .day-info-label {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            height: $day-info-heading-font-size*1.5;

            br {
                content: '';
            }
            br::after {
                content: '\00a0/\00a0';
            }
        }

        &~ .day-info-label::before {
            transform: rotate(0);
            @media (prefers-reduced-motion: no-preference) {
                transition: transform 0.1s;
            }
        }
    }

    &:checked {
        &~ .day-info-label::before {
            transform: rotate(90deg);
            @media (prefers-reduced-motion: no-preference) {
                transition: transform 0.1s;
            }
        }

        &~ .day-info-label .day-info-content {
            display: block;  // make content start at next line
        }
    }
}

.day-info-label {
    display: block;
    cursor: pointer;
    margin-bottom: 0;
}

.day-info-heading {
    font-size: $day-info-heading-font-size;
    font-weight: bold;
}


// ========================
// SUBSTITUTIONS TABLE

/*! purgecss start ignore */  // for .grey and .new-subs
.substitutions-table {
    margin-bottom: 0;

    white-space: nowrap;

    td {
        vertical-align: middle;
    }

    thead {
        th {
            border-top: none;
        }
    }

    tbody {
        tr.first-of-group td {
            border-top: $table-border-width solid var(--table-first-of-group-border-color);
        }

        tr.grey td:not(.group-name) {
            color: var(--table-grey-substitution-color);
        }

        tr.is-relevant td:not(.group-name) {
            font-weight: bold;
        }

        tr.new-subs td:not(.group-name) {
            background-color: var(--substitutions-table-new-subs-bg);
        }
    }

    &:not(.has-selection) .group-name:not(.selectable) {
        padding-left: $table-cell-padding-x-sm + 1.2rem;
    }

    > :not(:last-child) > :last-child > * {
        border-bottom-width: $table-group-separator-width;
    }

    & > :not(caption) > * > * {
        border-bottom-width: 0;
        border-top-width: 1px;
    }

    //noinspection ALL
    .group-name.selectable {
        position: relative;
    }
}
/*! purgecss end ignore */


// ========================
// ONLINE STATUS

#online-status {
    font-weight: $font-weight-bold;
    margin-left: .6em;
}

#online-status.online::before { // .online is added by JS
    background-color: #34ce57;
    width: 0.8em;
    height: 0.8em;
    border-radius: 0.4em;
    margin-right: 0.2em;
    content: "";
    display: inline-block;

    @media (prefers-reduced-motion: no-preference) {
        animation: blink 2.5s infinite;
    }
}

@keyframes blink {
      0% { opacity: 1 }
     35% { opacity: 0 }
     80% { opacity: 1 }
    100% { opacity: 1 }
}

#online-status.offline { // .offline is added by JS
    color: red;
}
