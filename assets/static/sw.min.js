(function(){'use strict';var c=c||{};c.scope={};c.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};c.arrayIterator=function(a){return{next:c.arrayIteratorImpl(a)}};c.ASSUME_ES5=!1;c.ASSUME_NO_NATIVE_MAP=!1;c.ASSUME_NO_NATIVE_SET=!1;c.SIMPLE_FROUND_POLYFILL=!1;c.ISOLATE_POLYFILLS=!1;
c.defineProperty=c.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){if(a==Array.prototype||a==Object.prototype)return a;a[b]=d.value;return a};c.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var d=a[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");};c.global=c.getGlobal(this);
c.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");c.TRUST_ES6_POLYFILLS=!c.ISOLATE_POLYFILLS||c.IS_SYMBOL_NATIVE;c.polyfills={};c.propertyToPolyfillSymbol={};c.POLYFILL_PREFIX="$jscp$";c.polyfill=function(a,b,d,e){b&&(c.ISOLATE_POLYFILLS?c.polyfillIsolated(a,b,d,e):c.polyfillUnisolated(a,b,d,e))};
c.polyfillUnisolated=function(a,b){var d=c.global;a=a.split(".");for(var e=0;e<a.length-1;e++){var f=a[e];if(!(f in d))return;d=d[f]}a=a[a.length-1];e=d[a];b=b(e);b!=e&&null!=b&&c.defineProperty(d,a,{configurable:!0,writable:!0,value:b})};
c.polyfillIsolated=function(a,b,d){var e=a.split(".");a=1===e.length;var f=e[0];f=!a&&f in c.polyfills?c.polyfills:c.global;for(var g=0;g<e.length-1;g++){var h=e[g];if(!(h in f))return;f=f[h]}e=e[e.length-1];d=c.IS_SYMBOL_NATIVE&&"es6"===d?f[e]:null;b=b(d);null!=b&&(a?c.defineProperty(c.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==d&&(c.propertyToPolyfillSymbol[e]=c.IS_SYMBOL_NATIVE?c.global.Symbol(e):c.POLYFILL_PREFIX+e,e=c.propertyToPolyfillSymbol[e],c.defineProperty(f,e,{configurable:!0,
writable:!0,value:b})))};c.initSymbol=function(){};c.initSymbolIterator=function(){};c.initSymbolAsyncIterator=function(){};c.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};
c.polyfill("String.prototype.matchAll",function(a){return a?a:function(b){if(b instanceof RegExp&&!b.global)throw new TypeError("RegExp passed into String.prototype.matchAll() must have global tag.");var d=new RegExp(b,b instanceof RegExp?void 0:"g"),e=this,f=!1,g={next:function(){var h={},l=d.lastIndex;if(f)return{value:void 0,done:!0};var k=d.exec(e);if(!k)return f=!0,{value:void 0,done:!0};d.lastIndex===l&&(d.lastIndex+=1);h.value=k;h.done=!1;return h}};g[Symbol.iterator]=function(){return g};
return g}},"es_2020","es3");self.addEventListener("fetch",()=>{});
self.addEventListener("push",a=>{var b=a.data.json();let d;try{let [,g,h,l,k,m]=b.status.match(/(\d\d).(\d\d).(\d\d\d\d) (\d\d):(\d\d)/);d=Date.UTC(l,h,g,k,m)}catch(g){console.error(g),d=null}let e,f;if(1===Object.keys(b.affected_groups_by_day).length)e=Object.keys(b.affected_groups_by_day)[0]+": Neue Vertretungen",f=Object.values(b.affected_groups_by_day)[0].join(", ");else{e="Neue Vertretungen";f="";for(let [g,h]of Object.entries(b.affected_groups_by_day))f+=g+": "+h.join(", ")+"\n"}b={body:f,icon:"favicon.ico",
badge:"favicon-96-monochrome.png",lang:"de",timestamp:d,vibrate:[300,100,400],data:{plan_type:b.plan_type,url:(new URL("/"+b.plan_type+"/",self.location.origin)).href}};a.waitUntil(self.registration.showNotification(e,b))});
self.addEventListener("error",a=>{const b={type:Object.getPrototypeOf(a.error).name};Object.getOwnPropertyNames(a.error).forEach(d=>b[d]=a.error[d]);fetch("/api/report-error",{method:"post",body:JSON.stringify({message:a.message,filename:a.filename,lineno:a.lineno,colno:a.colno,error:b})})});
self.addEventListener("notificationclick",a=>{a.notification.close();a.waitUntil(self.clients.matchAll({type:"window"}).then(function(b){for(let d of b)if(b=new URL(d.url),console.log(a.notification.data.url,b.origin+b.pathname),b.origin+b.pathname===a.notification.data.url&&"focus"in d)return d.focus();if(self.clients.openWindow)return self.clients.openWindow(a.notification.data.url).then(d=>d.focus())}));self.registration.getNotifications().then(b=>{b.forEach(d=>{a.notification.plan_type===d.data.plan_type&&
d.close()})})});}).call(this);

//# sourceMappingURL=sw.min.js.map
