{% extends "_base.min.html" %} {%- block content -%} <div class="box status-box clearfix"><span>Stand: <span id="status">{{ storage.status }}</span></span><span class="float-right" id="online-status"></span></div> {%- for day in storage.values() -%} {%- set day_loop = loop -%} <div class="box"><div class="p-0 mb-3"><div class="row"><div class="col-md"><div class="day-heading"><span class="day-name pr-1">{{- day.day_name -}}</span><span class="text-muted date">{{- day.date -}}</span></div>Woche {{ day.week -}} {%- if day.news -%} <div class="day-info"><input class="day-info-checkbox" id="day-info-checkbox-news" type="checkbox" aria-hidden="true"> <label for="day-info-checkbox-news" class="day-info-label"><span class="day-info-heading">Nachrichten: </span><span class="day-info-content">{{ day.news|map("safe")|join("<br>") }}</span></label></div> {%- endif -%} </div><div class="col-md"> {%- for title, text in day.info -%} <div class="day-info"><input class="day-info-checkbox" id="day-info-checkbox-{{ loop.index0 }}" type="checkbox" aria-hidden="true"> <label for="day-info-checkbox-{{ loop.index0 }}" class="day-info-label"><span class="day-info-heading">{{ title }}: </span><span class="day-info-content">{{ text }}</span></label></div> {%- endfor -%} </div></div></div> {%- set found_substitutions = true -%} {%- set subs_table -%} {%- for group in day.iter_groups(selection) -%} {%- set s = group.substitutions[0] -%} <tr class="first-of-group{% if day_loop.index == 1 and s.lesson_num is not none %} lesson{{ s.lesson_num }}{% endif %}{% if s.is_new %} new-subs{% endif %}"> {%- set has_affected_groups = not selection and group.affected_groups_pretty is not none and group.affected_groups_pretty|length == 1 -%} <td class="group-name{% if has_affected_groups %} selectable{% endif %}" rowspan="{{ group.substitutions|length }}"> {%- if has_affected_groups -%} <a class="i-bookmark stretched-link" href="?s={{ group.affected_groups_pretty.__iter__().__next__() }}"></a> {%- endif -%} {{- group.name.to_html()|safe -}} </td> {%- for data in group.substitutions[0] -%} <td>{{ data }}</td> {%- endfor -%} </tr> {%- for s in group.substitutions[1:] -%} {% set classes -%} {%- if day_loop.index == 1 and s.lesson_num is not none -%}lesson{{ s.lesson_num }}{% endif %}{% if s.is_new %} new-subs{%- endif -%} {%- endset %} <tr class="{{ classes }}" {%- if classes %} {% endif %}> {%- for data in s -%} <td>{{ data }}</td> {%- endfor -%} </tr> {%- endfor -%} {%- endfor -%} {%- endset -%} {%- if subs_table -%} <div class="table-responsive"><table class="table table-sm substitutions-table{% if selection %} has-selection{% endif %}"> {%- block table_head -%}{%- endblock -%} {{ subs_table|safe }} </table></div> {%- else -%} <p>Es gibt keine Vertretungen.</p> {%- endif -%} </div> {%- else -%} <div class="box">Es gibt keine Vertretungen.</div> {%- endfor -%} <div class="box"><h2>{% block select_heading %}{% endblock %}</h2><form class="form" type="get"><label for="selectionInput">{% block select_text %}{% endblock %}</label><div class="form-row"><div class="col-9 col-sm-6 col-md-4 col-xl-3"><input class="form-control" id="selectionInput" name="s" required value="{%- if selection -%}{{ selection_str }}{%- endif -%}" aria-describedby="selectionHelp"> <small class="form-text text-muted" id="selectionHelp"> {% block selection_help_text %}{% endblock %} </small></div><div class="col-3 col-sm-1 col-md-1"><button class="btn btn-primary mb-2" type="submit">OK</button></div></div> {%- if selection -%} <div class="form-row mt-3 ml-2"><a class="btn btn-primary" href="?all">{% block selection_all %}{% endblock %}</a></div> {%- endif -%} </form><div hidden id="notifications-block"><h2 class="mt-4" id="notifications-heading">{% block push_notifications_heading %}Benachrichtigungen <span class="badge badge-pill badge-success">Neu</span>{% endblock %}</h2>Erhalte Push-Benachrichtigungen, wenn es neue Vertretungen gibt.<div class="custom-control custom-switch mt-3"><input class="custom-control-input" id="toggle-notifications" type="checkbox"> <label for="toggle-notifications" class="custom-control-label no-select"><template id="notifications-info-none">Benachrichtigungen sind deaktiviert</template><template id="notifications-info-all">{% block notifications_info_all %}{% endblock %}</template><template id="notifications-info-selection">{% block notifications_info_selection %}Du wirst f√ºr <i>{selection}</i> benachrichtigt{% endblock %}</template><template id="notifications-info-blocked"><span class="text-danger">Du hast Benachrichtigungen vom Vertretungsplan blockiert. Erlaube Benachrichtigungen in den Einstellungen deines Browsers.</span></template><template id="notifications-info-failed">Das Aktivieren von Benachrichtigungen ist fehlgeschlagen. Lade die Seite neu oder verwende einen anderen Browser.</template><span id="notifications-info">Benachrichtigungen sind deaktiviert</span></label></div></div></div> {%- endblock -%} {%- block body_end -%} <script src="/assets/js/substitutions.min.js"></script> {%- endblock -%}