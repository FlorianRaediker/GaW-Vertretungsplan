'use strict';"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.min.js").then(a=>{console.log("Service worker registration succeeded:",a);"PushManager"in window&&window.Notification.requestPermission().then(a=>{if("granted"!==a)throw Error("Permission not granted for Notification:",a);})}).catch(a=>console.log("Service worker registration failed:",a));const c=document.getElementsByClassName("date");
function d(){const a=new Date;if(0<c.length&&c[0].innerHTML===a.getDate()+"."+(a.getMonth()+1)+"."+a.getFullYear()){const f=a.getHours(),m=a.getMinutes();for(let b of[["1",8,35],["2",9,25],["3",10,30],["4",11,15],["5",12,20],["6",13,10],["7",14,35],["8",15,25],["9",16,20],["10",17,5]])if(b[1]<f||b[1]===f&&b[2]<=m)for(let a of document.getElementsByClassName("lesson"+b[0]))a.classList.add("grey");else{setTimeout(d,(new Date(a.getFullYear(),a.getMonth(),a.getDate(),b[1],b[2])).getTime()-a.getTime());
break}}}d();let e=window.location.pathname.split(1)[1];e||(e="students");const g=new WebSocket("ws://localhost:8080/api/"+e+"/wait-for-update");g.onopen=a=>{console.log("WebSocket open",a);h(a)};g.onclose=a=>{console.log("WebSocket close",a);k(a)};g.onmessage=a=>{a=JSON.parse(a.data);console.log("onmessage",a);console.log("hello");window.location.reload()};const l=document.getElementById("online-status");
function h(){l.textContent="Aktuell";l.classList.add("online");l.classList.remove("offline")}function k(){l.textContent="Keine Verbindung zum Server";l.classList.add("offline");l.classList.remove("online")}window.ononline=h;window.onoffline=k;
