var a=[["1",8,35],["2",9,25],["3",10,30],["4",11,15],["5",12,20],["6",13,10],["7",14,35],["8",15,25],["9",16,20],["10",17,5]],b=document.getElementsByClassName("date"),c=document.getElementById("status-container"),d=null,e=new Date;
function f1(){null==d&&(d=document.createElement("span"),c.appendChild(d));var g=(new Date).getTime()-e.getTime(),h=Math.floor(g/6E4);0===h?d.textContent="Zuletzt aktualisiert: gerade eben":(1===h?d.textContent="Zuletzt aktualisiert vor 1 Minute ":60>h?d.textContent="Zuletzt aktualisiert vor "+h+" Minuten ":(g=Math.floor(g/36E5),d.textContent=1===g?"Zuletzt aktualisiert vor 1 Stunde ":24>g?"Zuletzt aktualisiert vor "+g+" Stunden ":"Zuletzt aktualisiert: "+e.getDate()+"."+(e.getMonth()+1)+"."+e.getFullYear()+
" "+e.getHours()+":"+e.getMinutes()+" "),g=document.createElement("a"),g.href="#",g.textContent="Jetzt aktualisieren",g.onclick=f3,d.appendChild(g))}var f=setInterval(f1,6E4);f1();
function f2(){var g=new Date;if(0<b.length&&b[0].innerHTML===", "+g.getDate()+"."+(g.getMonth()+1)+"."+g.getFullYear())for(var h=g.getHours(),m=g.getMinutes(),l=$jscomp.makeIterator(a),k=l.next();!k.done;k=l.next())if(k=k.value,k[1]<h||k[1]===h&&k[2]<=m)[].forEach.bind(document.getElementsByClassName("lesson"+k[0]),function(g){g.classList.add("grey")})();else{setTimeout(f2,(new Date(g.getFullYear(),g.getMonth(),g.getDate(),k[1],k[2])).getTime()-g.getTime());break}}f2();
function f3(){clearInterval(f);d.textContent="Aktualisiere...";(new Date).getDate()!==e.getDate()?console.log("date changed"):fetch("/api/last-status").then(function(g){return g.text()}).then(function(g){c.innerHTML.includes(g)?(e=new Date,f=setInterval(f1,6E4),f1(),f2()):window.location.reload()})["catch"](function(){d.textContent="Aktualisierung fehlgeschlagen ";var g=document.createElement("a");g.href="#";g.textContent="Nochmal versuchen";g.onclick=f3;d.appendChild(g)})}window.onfocus=f3;
